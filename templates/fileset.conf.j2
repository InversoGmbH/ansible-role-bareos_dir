{{ ansible_managed | comment }}

{% if item.enabled is defined and item.enabled or item.enabled is not defined %}
FileSet {
  Name = "{{ item.name }}"
  Description = "{{ item.description }}"
  Include {
    Options {
      Signature = {{ item.include.options.signature }}
      One FS = {{ item.include.options.one_fs | ternary('Yes', 'No') }}
{% for fs_type in item.include.options.fs_types %}
      FS Type = {{ fs_type }}
{% endfor %}
    }
{% for file in item.include.files %}
    File = {{ file }}
{% endfor %}
  }
  Exclude {
{% for file in item.exclude.files %}
    File = {{ file }}
{% endfor %}
  }
}
{% else %}
# This file is not enabled.
{% endif %}
